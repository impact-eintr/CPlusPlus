面试高频指数：★★★☆☆

### 请你回答一下野指针是什么？

野指针就是指向一个**已删除的对象**或者**未申请访问受限内存区域**的指针

**概念**：指针指向了一块随机的空间，不受程序控制。

#### 野指针产生的原因：

指针定义时未被初始化：指针在被定义的时候，如果程序不对其进行初始化的话，它会随机指向一个区域，因为任意指针变量（出了static修饰的指针）它的默认值都是随机的
指针被释放时没有置空：我们在用malloc（）开辟空间的时候，要检查返回值是否为空，如果为空，则开辟失败；如果不为空，则指针指向的是开辟的内存空间的首地址。指针指向的内存空间在用free()和delete释放后，如果程序员没有对其进行置空或者其他赋值操作的话，就会成为一个野指针
指针操作超越变量作用域：不要返回指向栈内存的指针或者引用，因为栈内存在函数结束的时候会被释放。

#### 野指针的危害：

问题：指针指向的内容已经无效了，而指针没有被置空，解引用一个非空的无效指针是一个未被定义的行为，也就是说不一定导致错误，野指针被定位到是哪里出现问题，在哪里指针就失效了，不好查找错误的原因。

#### 规避方法：

初始化指针的时候将其置为nullptr，之后对其操作。
释放指针的时候将其置为nullptr。



### 空指针、野指针与悬空指针的区别：

空指针：指被赋值为NULL的指针；空指针可以被多次delete，

野指针：访问一个已销毁或者访问受限的内存区域的指针，野指针不能判断是否为NULL来避免。

```c++
void *p; 
// 此时 p 是“野指针”。
```

悬空指针：

若指针指向一块内存空间，当这块内存空间被释放后，该指针依然指向这块内存空间，此时，称该指针为“悬空指针”。悬垂指针再次删除时程序会变得非常不稳定。
举例：

```c++
void *p = malloc(size);
free(p); 
// 此时，p 指向的内存空间已释放， p 就是悬空指针
```



使用空指针和悬垂指针都是非法的，而且有可能造成程序崩溃，如果指针是空指针，尽管同样是崩溃，但和悬垂指针相比是一种可预料的崩溃。
